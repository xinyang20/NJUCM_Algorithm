## 第1页：标题与信息

- 课程：算法设计与分析（选修）
- 主题：Turning Red 问题与解法
- 授课：南京中医药大学·大二·计算机专业

## 第2页：目录

  1. 引言与背景
  2. 颜色与按键模型
  3. 约束方程与图模型
  4. 算法概览
  5. 处理已确定按钮次数
  6. 连通分量与尝试策略
  7. 简单示例演示

## 第3页：引言与背景

- LED灯可设置 R/G/B 三色
- 按钮控制若干灯：按一下，R→G→B→R
- 每灯最多两个按钮控制
- 目标：最少按动次数，使所有灯变红

## 第4页：颜色与按键模型

- 红(R)=0、绿(G)=1、蓝(B)=2
- 按钮按动 x 次：颜色值 + x mod 3
- 只需考虑 x ∈ {0,1,2}

## 第5页：约束方程与图模型

- 灯 L 初始值 c_L
  - 无按钮：c_L==0，否则 impossible
  - 单控按钮 i：c_L + x_i ≡ 0 (mod3)
  - 双控 i,j：c_L + x_i + x_j ≡ 0 (mod3)
- 构建按钮图：若共控灯则连边

## 第6页：算法概览

1. 初始化 x_i=-1, 未固定
2. 先处理单控方程，固定部分 x_i
3. 遍历每个按钮：
   - 已固定且未访问：BFS 传播，累加次数
   - 未固定且未访问：连通分量发现 + 尝试3种起始值
4. 最后验证所有灯变红

## 第7页：已确定按钮次数处理

- 遍历灯：
  - 单控：x_i = (-c_L) mod3，标记固定
  - 无控：若 c_L≠0，impossible
- 对固定按钮：BFS 传播确定邻居按钮值
- 矛盾检测 → 提前终止

## 第8页：连通分量与尝试策略

- 对未固定且未访问按钮 s：
  1. BFS 找到分量内按钮集合
  2. 任选 start, 尝试 x_start=0/1/2
  3. 传播求值，检测矛盾
  4. 选最小总和方案，更新全局 x
  5. 若三种尝试均失败 → impossible

## 第9页：简单示例演示

- 2灯2键示例：
  - 灯1(G=1) 单控 B1 → x1=2
  - 灯2(B=2) 双控 B1,B2 → (2+2+x2)%3=0 → x2=2
  - 总次数=4

## 第10页：总结与思考

- 模3算术与线性方程
- 图的连通分量 + 尝试优化
- 时间复杂度 O(l+b)
- 可扩展性：类似约束传播问题